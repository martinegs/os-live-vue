server {
    listen 4000 ssl http2;
    server_name localhost;
    
    # Certificado SSL auto-firmado para desarrollo
    ssl_certificate C:/laragon/etc/ssl/laragon.crt;
    ssl_certificate_key C:/laragon/etc/ssl/laragon.key;
    
    root C:/Users/MArti/OneDrive/Documentos/Proyectos/JavaScript/DigitalTex/backend-laravel/public;
    index index.php index.html;
    
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
    
    # SSE - mantener conexi√≥n abierta
    location ~ ^/realtime {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Connection '';
        proxy_buffering off;
        proxy_cache off;
        chunked_transfer_encoding off;
    }
}
